<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q&S Extension Lab - nri-kafka Integration</title>
    <meta name="description" content="Technical enablement for extending New Relic Queues & Streams to support nri-kafka">
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>🔧</text></svg>">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="terminal.css">
    <link rel="stylesheet" href="technical-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Technical Sidebar -->
        <nav class="sidebar technical-sidebar">
            <div class="logo">
                <i class="fas fa-plug"></i>
                <h2>Q&S Extension Lab</h2>
                <p class="tagline">nri-kafka Integration</p>
            </div>
            
            <div class="nav-section">
                <h3>Prerequisites</h3>
                <ul class="nav-list">
                    <li><a href="#overview" class="nav-item active"><i class="fas fa-info-circle"></i> Mission Brief</a></li>
                    <li><a href="#environment" class="nav-item"><i class="fas fa-server"></i> Lab Environment</a></li>
                    <li><a href="#checklist" class="nav-item"><i class="fas fa-clipboard-check"></i> Readiness Check</a></li>
                </ul>
            </div>

            <div class="nav-section">
                <h3>Technical Modules</h3>
                <ul class="nav-list">
                    <li class="nav-module">
                        <a href="#module1" class="nav-item">
                            <i class="fas fa-sitemap"></i> 
                            <span>M1: Q&S Architecture</span>
                            <span class="status-indicator" id="m1-status">⚪</span>
                        </a>
                    </li>
                    <li class="nav-module">
                        <a href="#module2" class="nav-item">
                            <i class="fas fa-database"></i> 
                            <span>M2: nri-kafka Analysis</span>
                            <span class="status-indicator" id="m2-status">⚪</span>
                        </a>
                    </li>
                    <li class="nav-module">
                        <a href="#module3" class="nav-item">
                            <i class="fas fa-code-branch"></i> 
                            <span>M3: Integration Design</span>
                            <span class="status-indicator" id="m3-status">⚪</span>
                        </a>
                    </li>
                    <li class="nav-module">
                        <a href="#module4" class="nav-item">
                            <i class="fas fa-vial"></i> 
                            <span>M4: Testing & Validation</span>
                            <span class="status-indicator" id="m4-status">⚪</span>
                        </a>
                    </li>
                    <li class="nav-module">
                        <a href="#module5" class="nav-item">
                            <i class="fas fa-rocket"></i> 
                            <span>M5: Production Ready</span>
                            <span class="status-indicator" id="m5-status">⚪</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="nav-section">
                <h3>Tools & Resources</h3>
                <ul class="nav-list">
                    <li><a href="#data-analyzer" class="nav-item"><i class="fas fa-microscope"></i> Data Analyzer</a></li>
                    <li><a href="#comparison" class="nav-item"><i class="fas fa-columns"></i> Comparison Tool</a></li>
                    <li><a href="#transformer" class="nav-item"><i class="fas fa-exchange-alt"></i> Transformer</a></li>
                    <li><a href="#validator" class="nav-item"><i class="fas fa-check-double"></i> Validator</a></li>
                </ul>
            </div>

            <div class="implementation-progress">
                <h3>Implementation Status</h3>
                <div class="milestone-list">
                    <div class="milestone" id="milestone-1">
                        <i class="fas fa-square"></i> Q&S Architecture Mapped
                    </div>
                    <div class="milestone" id="milestone-2">
                        <i class="fas fa-square"></i> nri-kafka Output Analyzed
                    </div>
                    <div class="milestone" id="milestone-3">
                        <i class="fas fa-square"></i> Gap Analysis Complete
                    </div>
                    <div class="milestone" id="milestone-4">
                        <i class="fas fa-square"></i> PoC Implemented
                    </div>
                    <div class="milestone" id="milestone-5">
                        <i class="fas fa-square"></i> Tests Passing
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="main-content technical-content">
            <!-- Mission Brief -->
            <section id="overview" class="content-section active">
                <div class="section-header">
                    <h1>🎯 Mission: Extend Q&S to Support nri-kafka</h1>
                    <p class="subtitle">Transform nri-kafka into a first-class Queues & Streams data source</p>
                </div>

                <div class="mission-brief">
                    <div class="brief-card critical">
                        <h3><i class="fas fa-exclamation-triangle"></i> Current State</h3>
                        <p>Queues & Streams only supports MSK and Confluent Platform. Teams using standard nri-kafka cannot leverage Q&S visualizations.</p>
                    </div>
                    
                    <div class="brief-card target">
                        <h3><i class="fas fa-bullseye"></i> Target State</h3>
                        <p>nri-kafka becomes a supported data source, providing the same rich visualizations and bi-directional insights.</p>
                    </div>
                    
                    <div class="brief-card timeline">
                        <h3><i class="fas fa-clock"></i> Timeline</h3>
                        <p>10-day sprint to production-ready integration with full test coverage and documentation.</p>
                    </div>
                </div>

                <div class="technical-requirements">
                    <h2>Technical Requirements</h2>
                    <div class="requirement-grid">
                        <div class="requirement">
                            <h4>Data Compatibility</h4>
                            <ul>
                                <li>Map nri-kafka entities to Q&S model</li>
                                <li>Transform metrics to required format</li>
                                <li>Preserve trace context</li>
                            </ul>
                        </div>
                        <div class="requirement">
                            <h4>Visualization Support</h4>
                            <ul>
                                <li>Honeycomb cluster view</li>
                                <li>Producer/consumer connections</li>
                                <li>Lag and throughput metrics</li>
                            </ul>
                        </div>
                        <div class="requirement">
                            <h4>Performance</h4>
                            <ul>
                                <li>Handle 1000+ topics</li>
                                <li>Sub-second update latency</li>
                                <li>Minimal overhead</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h2>Quick Start</h2>
                    <button class="action-button primary" onclick="setupEnvironment()">
                        <i class="fas fa-play"></i> Setup Lab Environment
                    </button>
                    <button class="action-button secondary" onclick="loadSampleData()">
                        <i class="fas fa-download"></i> Load Sample Data
                    </button>
                    <button class="action-button secondary" onclick="startModule1()">
                        <i class="fas fa-graduation-cap"></i> Begin Module 1
                    </button>
                </div>
            </section>

            <!-- Module 1: Q&S Architecture -->
            <section id="module1" class="content-section">
                <div class="section-header">
                    <h1>Module 1: Q&S Architecture Deep Dive</h1>
                    <p class="subtitle">Understand how Queues & Streams works with current sources</p>
                </div>

                <div class="module-objectives">
                    <h2>Learning Objectives</h2>
                    <ul class="objective-list">
                        <li class="objective-item">
                            <input type="checkbox" id="m1-obj-1">
                            <label for="m1-obj-1">Understand Q&S data ingestion pipeline</label>
                        </li>
                        <li class="objective-item">
                            <input type="checkbox" id="m1-obj-2">
                            <label for="m1-obj-2">Map entity relationships in honeycomb view</label>
                        </li>
                        <li class="objective-item">
                            <input type="checkbox" id="m1-obj-3">
                            <label for="m1-obj-3">Identify required metrics and attributes</label>
                        </li>
                        <li class="objective-item">
                            <input type="checkbox" id="m1-obj-4">
                            <label for="m1-obj-4">Trace data flow from source to visualization</label>
                        </li>
                    </ul>
                </div>

                <div class="interactive-architecture">
                    <h2>Q&S Data Flow Architecture</h2>
                    <div class="architecture-diagram" id="qs-architecture">
                        <!-- Interactive architecture diagram will be rendered here -->
                    </div>
                    
                    <div class="flow-controls">
                        <button onclick="traceDataFlow('msk')"><i class="fas fa-route"></i> Trace MSK Flow</button>
                        <button onclick="traceDataFlow('confluent')"><i class="fas fa-route"></i> Trace Confluent Flow</button>
                        <button onclick="highlightEntities()"><i class="fas fa-project-diagram"></i> Show Entities</button>
                    </div>
                </div>

                <div class="hands-on-lab">
                    <h2>🧪 Lab 1.1: Examine MSK Data Flow</h2>
                    
                    <div class="lab-steps">
                        <div class="lab-step">
                            <h3>Step 1: Launch MSK Environment</h3>
                            <div class="code-block">
                                <pre><code class="language-bash"># Start MSK cluster with Q&S enabled
docker-compose -f labs/msk-qs-enabled.yml up -d

# Verify Q&S agent is running
docker exec msk-qs-agent status</code></pre>
                            </div>
                            <button class="run-button" onclick="executeLab('m1-step1')">
                                <i class="fas fa-play"></i> Execute
                            </button>
                        </div>

                        <div class="lab-step">
                            <h3>Step 2: Capture Q&S Data Payload</h3>
                            <div class="terminal-split">
                                <div class="terminal-half">
                                    <h4>Terminal 1: Capture Traffic</h4>
                                    <div id="m1-capture-terminal"></div>
                                </div>
                                <div class="terminal-half">
                                    <h4>Data Inspector</h4>
                                    <div id="m1-data-inspector"></div>
                                </div>
                            </div>
                        </div>

                        <div class="lab-step">
                            <h3>Step 3: Analyze Entity Model</h3>
                            <div class="entity-analyzer">
                                <div class="entity-tree" id="qs-entity-tree"></div>
                                <div class="entity-details" id="qs-entity-details"></div>
                            </div>
                        </div>
                    </div>

                    <div class="key-findings">
                        <h3>📝 Document Your Findings</h3>
                        <textarea id="m1-findings" placeholder="What are the key data structures Q&S expects?"></textarea>
                        <button onclick="saveFindings('m1')">Save Findings</button>
                    </div>
                </div>
            </section>

            <!-- Data Analyzer Tool -->
            <section id="data-analyzer" class="content-section">
                <div class="section-header">
                    <h1>🔬 Data Analyzer</h1>
                    <p class="subtitle">Deep inspection of Q&S and nri-kafka data structures</p>
                </div>

                <div class="analyzer-container">
                    <div class="analyzer-controls">
                        <button onclick="loadQSData()">Load Q&S Sample</button>
                        <button onclick="loadNRIData()">Load nri-kafka Sample</button>
                        <button onclick="compareData()">Compare Structures</button>
                    </div>

                    <div class="analyzer-workspace">
                        <div class="data-panel" id="qs-data-panel">
                            <h3>Q&S Data Structure</h3>
                            <div class="data-viewer"></div>
                        </div>
                        <div class="data-panel" id="nri-data-panel">
                            <h3>nri-kafka Data Structure</h3>
                            <div class="data-viewer"></div>
                        </div>
                    </div>

                    <div class="analysis-results" id="analysis-results">
                        <!-- Comparison results will appear here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="terminal.js"></script>
    <script src="technical-app.js"></script>
</body>
</html>